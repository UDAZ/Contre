<div class="col-12 mt-3">
  <h4 class="display-5"><i class="fas fa-book mr-2"></i><%= t'posts.post' %> / <% if @post.title.length >= 5 %><%= @post.title.slice(0..12).insert(-1, "…") %><% else %><%= @post.title %><% end %></h4>
</div>
<div class="col-12 col-lg-8 mx-auto">
  <div class="card mt-3">
    <div class="card-body">
      <div class="d-flex justify-content-center">
        <h4 class="card-title"><%= @post.title %></h4>
      </div>
      <div class="d-flex justify-content-center mb-3">
        <p class="card-text"><%= @post.genre.name %></p>
      </div>
      <div class="col-11 mx-auto mb-3">
        <%= markdown(@post.body) %>
      </div>
      <div class="col-11 mx-auto mb-3" id="favs_buttons_<%= @post.id %>">
        <%= render 'favorites/fav', post: @post %>
      </div>
      <div class="col-11 mx-auto mb-3">
        <%= render 'reports/report', post: @post %>
      </div>
      <% if @post.user = current_user %>
        <div class="d-flex justify-content-center mb-3">
          <p class="card-text col-11">
            <%= link_to "#{t'posts.edit'}", edit_post_path(@post) %>
            <%= link_to "#{t'posts.destroy'}", post_path(@post), method: :delete, data: { confirm: '本当に消しますか？' } %>
          </p>
        </div>
      <% end %>
    </div>
  </div>
</div>
<% unless user_signed_in? %>
  <div class="modal js-modal-fav">
  <div class="modal_bg js-modal-close-fav"></div>
    <div class="modal_content col-10 col-lg-6">
      <i class="fa fa-times-circle text-white js-modal-close-fav" aria-hidden="true"></i>
      <div class="d-flex justify-content-center">
        <h4 class="card-title">ぜひご登録を！</h4>
      </div>
      <p>GitHubアカウントでログインすると「いいね」など様々な機能をお使い頂けます。<%= link_to "#{t'header.login'}", user_github_omniauth_authorize_path, method: :post %></p>
    </div>
  </div>
<% end %>
<%= javascript_include_tag "modal-fav.js", "modal-report.js" %>
<%= stylesheet_link_tag "posts.css" %>
